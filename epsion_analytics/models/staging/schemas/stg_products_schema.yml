# This file contains the schema definition for the staging model of products data.
# It is used to define the structure, descriptions, and tests for the columns in the staging model.


version: 2

models:
  - name: stg_products
    description: "Staging table containing raw product data extracted from the source system via Airbyte. Used for initial validation and quality checks before transformations."
    columns:
      - name: _AIRBYTE_RAW_ID
        description: "Unique record identifier generated by Airbyte for each ingested raw product record."
        tests:
          - not_null
          - unique
      - name: _AIRBYTE_EXTRACTED_AT
        description: "Timestamp when the product data was extracted from the source system by Airbyte."
        tests:
          - not_null
      - name: _AIRBYTE_META
        description: "Metadata related to the Airbyte ingestion process, stored as a JSON blob."
      - name: _AIRBYTE_GENERATION_ID
        description: "Identifier for the Airbyte ingestion batch or generation run."
      - name: PRODUCT_KEY
        description: "Primary business key for the product, directly sourced from upstream systems."
        tests:
          - not_null
          - unique
      - name: PRODUCT_NAME
        description: "Raw product name as received from the source."
        tests:
          - not_null:
              severity: warn
          - unique:
              severity: warn
      - name: PRODUCT_SKU
        description: "Stock keeping unit identifier for the product, as provided in source data."
      - name: MODEL_NAME
        description: "Model name or number associated with the product."
      - name: PRODUCT_SIZE
        description: "Size attribute of the product as recorded in the source system."
      - name: PRODUCT_COLOR
        description: "Color attribute of the product."
      - name: PRODUCT_STYLE
        description: "Style attribute of the product."
      - name: PRODUCT_DESCRIPTION
        description: "Textual description of the product provided in the source data."
      - name: PRODUCT_PRICE
        description: "Price of the product as recorded in the source system."
      - name: PRODUCT_COST
        description: "Cost to produce or acquire the product, sourced from upstream."
      - name: SUBCATEGORY_KEY
        description: "Foreign key linking the product to its subcategory in the source data."
